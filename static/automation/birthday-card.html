<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Birthday Card Template</title>
  <style>
    :root {
      color-scheme: light;
      --title-color: #065f8f;
      --message-color: #c72020;
      --text-color: #111;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      min-height: 100vh;
      display: grid;
      place-items: center;
      font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      background: #ece9d9;
      color: var(--text-color);
      padding: 12px;
    }

    .card {
      width: 1530px;
      height: 982px;
      max-width: 100%;
      max-height: calc(100vh - 24px);
      aspect-ratio: 1530 / 982;
      background: url("./birthday-bg.svg") center/contain no-repeat;
      border: 2px solid #2f3640;
      box-shadow: none;
      padding: clamp(20px, 3vw, 40px);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
      gap: 8px;
      overflow: hidden;
    }

    h1 {
      margin: 0;
      font-size: clamp(2rem, 5vw, 3.25rem);
      color: var(--title-color);
      letter-spacing: 0.3px;
      font-weight: 600;
    }

    .date {
      margin: 0;
      font-size: clamp(1.5rem, 3.2vw, 2.4rem);
      font-weight: 600;
    }

    .photo {
      width: clamp(175px, 26vw, 230px);
      aspect-ratio: 3 / 4;
      border: 2px solid #222;
      background: #f2f2f2;
      object-fit: cover;
      display: block;
    }

    .name {
      margin: 0;
      font-size: clamp(1.9rem, 4vw, 2.7rem);
      font-weight: 500;
    }

    .tagline {
      margin: 10px 0 0;
      color: var(--message-color);
      font-size: clamp(1.9rem, 4vw, 2.9rem);
      font-weight: 700;
      line-height: 1.2;
    }

    @media (max-width: 1530px), (max-height: 982px) {
      .card {
        width: min(1530px, calc((100vh - 24px) * 1530 / 982), calc(100vw - 24px));
        height: auto;
      }
    }
  </style>
</head>
<body>
  <main class="card" role="main" aria-label="Birthday card template">
    <h1 id="title">Happy Birthday</h1>
    <p class="date" id="date">20<sup>th</sup> February</p>
    <img class="photo" id="photo" src="https://via.placeholder.com/230x307.png?text=Photo" alt="Birthday person's photo" />
    <p class="name" id="name">Teena Sabbarwal</p>
    <p class="tagline" id="tagline">Have a wonderful day &amp; year ahead!</p>
  </main>

  <script>
    const params = new URLSearchParams(window.location.search);

    const defaults = {
      title: "Happy Birthday",
      date: "20th February",
      name: "Teena Sabbarwal",
      tagline: "Have a wonderful day & year ahead!",
      photo: "https://via.placeholder.com/230x307.png?text=Photo"
    };

    const getValue = (key) => params.get(key) || defaults[key];

    const renderDate = (value) => {
      const match = value
        .trim()
        .match(/^(\d{1,2})(?:\s*)(st|nd|rd|th)?\s+([A-Za-z]+(?:\s+[A-Za-z]+)*)$/i);

      if (!match) {
        return defaults.date;
      }

      const [, day, suffix = "th", month] = match;
      return `${Number(day)}<sup>${suffix.toLowerCase()}</sup> ${month.trim()}`;
    };

    document.getElementById("title").textContent = getValue("title");
    document.getElementById("date").innerHTML = renderDate(getValue("date"));
    document.getElementById("name").textContent = getValue("name");
    document.getElementById("tagline").textContent = getValue("tagline");

    const photo = document.getElementById("photo");
    photo.src = getValue("photo");
    photo.addEventListener("error", () => {
      photo.src = defaults.photo;
    }, { once: true });
  </script>
</body>
</html>
